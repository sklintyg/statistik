subprojects {
	apply plugin: "eclipse"
	apply plugin: "java"

	repositories {
		mavenLocal()
		mavenCentral()
	}

	dependencies {
		testCompile "org.springframework:spring-test:3.1.1.RELEASE"
		testCompile "junit:junit:4.+"
	}

	version = 1.0
}

project(":statistics-model") {
	dependencies {
		compile "org.hibernate:hibernate-core:3.6.8.Final"
		compile "org.hibernate:hibernate-entitymanager:3.6.8.Final"
	}
}

project(":statistics-core") {
	apply plugin: "scala"

	dependencies {
		compile project(":statistics-model")
		
		compile "se.inera.commons:inera-commons:1.0-SNAPSHOT"
		compile "org.springframework:spring-context:3.1.1.RELEASE"
		compile "org.springframework.data:spring-data-jpa:1.0.1.RELEASE"
		compile "commons-dbcp:commons-dbcp:1.4"
		
		compile "hsqldb:hsqldb:1.8.0.10"
	}
}

project(":statistics-rest-api") {
	dependencies {
		compile project(":statistics-core")
		
		compile "org.springframework:spring-web:3.1.1.RELEASE"
		compile "org.springframework:spring-webmvc:3.1.1.RELEASE"
	}
}

project(":statistics-web") {
	apply plugin: "jetty"
	apply plugin: "war"

	dependencies {
		compile project(":statistics-rest-api")
		compile project(":statistics-core")
		
		providedCompile "javax.servlet:servlet-api:2.4"
		
		compile "org.springframework.security:spring-security-core:3.1.0.RELEASE"
		compile "org.springframework.security:spring-security-web:3.1.0.RELEASE"
		compile "org.springframework.security:spring-security-config:3.1.0.RELEASE"
		compile "org.springframework.security:spring-security-taglibs:3.1.0.RELEASE"
		
		
		compile "org.springframework:spring-web:3.1.1.RELEASE"
		compile "org.springframework:spring-webmvc:3.1.1.RELEASE"
	
		compile "org.codehaus.jackson:jackson-core-lgpl:1.9.2"
		compile "org.codehaus.jackson:jackson-mapper-lgpl:1.9.2"
		
		testCompile "org.apache.httpcomponents:httpclient:4.1.3"
	}
	
	task startJetty << {
		jettyRun.daemon = true
		jettyRun.execute()
	}
	
	test {
		dependsOn "startJetty"
	}
}