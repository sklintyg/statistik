apiVersion: v1
data:
  idp-sakerhetstjanst.xml: |
    <?xml version="1.0" encoding="UTF-8"?>
    <md:EntityDescriptor xmlns:mdattr="urn:oasis:names:tc:SAML:metadata:attribute" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:idpdisc="urn:oasis:names:tc:SAML:profiles:SSO:idp-discovery-protocol" xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion" xmlns:md="urn:oasis:names:tc:SAML:2.0:metadata" xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" entityID="https://idp2.sakerhetstjanst.inera.se:443/idp/saml">
      <md:Extensions>
        <mdattr:EntityAttributes>
          <saml:Attribute Name="urn:oasis:names:tc:SAML:attribute:assurance-certification" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri">
            <saml:AttributeValue>https://id.sambi.se/loa/loa3</saml:AttributeValue>
          </saml:Attribute>
        </mdattr:EntityAttributes>
      </md:Extensions>
      <md:IDPSSODescriptor WantAuthnRequestsSigned="false" protocolSupportEnumeration="urn:oasis:names:tc:SAML:2.0:protocol">
        <md:KeyDescriptor use="signing">
          <ds:KeyInfo>
            <ds:X509Data>
              <ds:X509Certificate>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</ds:X509Certificate>
            </ds:X509Data>
          </ds:KeyInfo>
        </md:KeyDescriptor>
        <md:KeyDescriptor use="signing">
          <ds:KeyInfo>
            <ds:X509Data>
              <ds:X509Certificate>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</ds:X509Certificate>
            </ds:X509Data>
          </ds:KeyInfo>
        </md:KeyDescriptor>
        <md:ArtifactResolutionService Binding="urn:oasis:names:tc:SAML:2.0:bindings:SOAP" Location="https://idp2.sakerhetstjanst.inera.se:443/idp/saml/artifact/SOAP" index="1" isDefault="false"/>
        <md:SingleLogoutService Binding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" Location="https://idp2.sakerhetstjanst.inera.se:443/idp/saml/slo/HTTP-POST"/>
        <md:SingleLogoutService Binding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect" Location="https://idp2.sakerhetstjanst.inera.se:443/idp/saml/slo/HTTP-Redirect"/>
        <md:NameIDFormat>urn:oasis:names:tc:SAML:2.0:nameid-format:transient</md:NameIDFormat>
        <md:NameIDFormat>urn:oasis:names:tc:SAML:2.0:nameid-format:persistent</md:NameIDFormat>
        <md:SingleSignOnService Binding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect" Location="https://idp2.sakerhetstjanst.inera.se:443/idp/saml/sso/HTTP-Redirect"/>
        <saml:Attribute Name="http://sambi.se/attributes/1/paTitleCode" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" FriendlyName="titleCode"/>
        <saml:Attribute Name="http://sambi.se/attributes/1/commissionPurpose" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" FriendlyName="commissionPurpose"/>
        <saml:Attribute Name="http://sambi.se/attributes/1/mobileTelephoneNumber" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" FriendlyName="mobileTelephoneNumber"/>
        <saml:Attribute Name="http://sambi.se/attributes/1/employeeHsaId" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" FriendlyName="employeeHsaId"/>
        <saml:Attribute Name="http://sambi.se/attributes/1/healthCareUnitName" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" FriendlyName="careUnitName"/>
        <saml:Attribute Name="http://sambi.se/attributes/1/systemRole" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" FriendlyName="systemRole"/>
        <saml:Attribute Name="http://sambi.se/attributes/1/groupPrescriptionCode" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" FriendlyName="groupPrescriptionCode"/>
        <saml:Attribute Name="http://sambi.se/attributes/1/healthCareUnitHsaId" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" FriendlyName="careUnitHsaId"/>
        <saml:Attribute Name="http://sambi.se/attributes/1/commissionHsaId" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" FriendlyName="assignmentHsaId"/>
        <saml:Attribute Name="http://sambi.se/attributes/1/givenName" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" FriendlyName="givenName"/>
        <saml:Attribute Name="http://sambi.se/attributes/1/commissionRight" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" FriendlyName="commissionRight"/>
        <saml:Attribute Name="http://sambi.se/attributes/1/healthcareProfessionalLicense" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" FriendlyName="title"/>
        <saml:Attribute Name="http://sambi.se/attributes/1/commissionName" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" FriendlyName="assignmentName"/>
        <saml:Attribute Name="http://sambi.se/attributes/1/mail" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" FriendlyName="mail"/>
        <saml:Attribute Name="http://sambi.se/attributes/1/healthCareProviderName" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" FriendlyName="careProviderName"/>
        <saml:Attribute Name="http://sambi.se/attributes/1/telephoneNumber" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" FriendlyName="telephoneNumber"/>
        <saml:Attribute Name="http://sambi.se/attributes/1/surname" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" FriendlyName="middleAndSurname"/>
        <saml:Attribute Name="http://sambi.se/attributes/1/personalIdentityNumber" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" FriendlyName="personalIdentityNumber"/>
        <saml:Attribute Name="http://sambi.se/attributes/1/personalPrescriptionCode" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" FriendlyName="personalPrescriptionCode"/>
        <saml:Attribute Name="urn:sambi:names:attribute:levelOfAssurance" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" FriendlyName="levelOfAssurance"/>
        <saml:Attribute Name="urn:sambi:names:attribute:x509IssuerName" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" FriendlyName="x509IssuerName"/>
        <saml:Attribute Name="http://sambi.se/attributes/1/healthCareProviderHsaId" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" FriendlyName="careProviderHsaId"/>
        <saml:Attribute Name="urn:sambi:names:attribute:authnMethod" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" FriendlyName="authnMethod"/>
      </md:IDPSSODescriptor>
      <md:Organization>
        <md:OrganizationName xml:lang="sv">S채kerhetstj채nster</md:OrganizationName>
        <md:OrganizationDisplayName xml:lang="sv">S채kerhetstj채nster</md:OrganizationDisplayName>
        <md:OrganizationURL xml:lang="sv">https://idp.sakerhetstjanst.inera.se:443/idp/saml</md:OrganizationURL>
      </md:Organization>
      <md:ContactPerson xml:lang="sv" contactType="technical">
        <md:Company>CGI</md:Company>
        <md:GivenName>-</md:GivenName>
        <md:SurName>-</md:SurName>
        <md:EmailAddress>nationella.sakerhetstjanster@cgi.com</md:EmailAddress>
        <md:TelephoneNumber>063-152299</md:TelephoneNumber>
      </md:ContactPerson>
    </md:EntityDescriptor>
  logback-ocp.xml: |
    <?xml version="1.0" encoding="UTF-8" ?>
    <!--

        Copyright (C) 2019 Inera AB (http://www.inera.se )

        This file is part of statistik (https://github.com/sklintyg/statistik ).

        statistik is free software: you can redistribute it and/or modify
        it under the terms of the GNU General Public License as published by
        the Free Software Foundation, either version 3 of the License, or
        (at your option) any later version.

        statistik is distributed in the hope that it will be useful,
        but WITHOUT ANY WARRANTY; without even the implied warranty of
        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
        GNU General Public License for more details.

        You should have received a copy of the GNU General Public License
        along with this program.  If not, see <http://www.gnu.org/licenses/> .

    -->
    <configuration>
        <!-- logback config for the Openshift Container Platform (OCP). Stream to stdout, use layout and appenders from infra. -->

        <property name="APP_NAME" value="${APP_NAME:-statistik}"/>

        <include resource="logback-ocp-base.xml"/>

        <!-- ST Is not using IntygUser from infra -->
        <appender name="ST_MONITORING" class="ch.qos.logback.core.ConsoleAppender">
            <filter class="se.inera.intyg.infra.monitoring.logging.MarkerFilter">
                <marker>Monitoring</marker>
                <onMatch>ACCEPT</onMatch>
                <onMismatch>DENY</onMismatch>
            </filter>
            <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
                <pattern>${TIMESTAMP} [monitoring,${SESSION},${TRACE}] ${LINE}</pattern>
            </encoder>
        </appender>


        <logger name="org.apache.camel" level="WARN"/>
        <logger name="org.apache.activemq" level="WARN"/>
        <logger name="org.springframework" level="WARN"/>
        <logger name="org.springframework.security" level="WARN"/>
        <logger name="org.springframework.core.env.PropertySourcesPropertyResolver" level="WARN"/>
        <logger name="org.springframework.web" level="WARN"/>
        <logger name="org.springframework.http" level="WARN"/>

        <logger name="se.inera.certificate.web" level="WARN"/>

        <logger name="org.springframework.security.saml.log" level="INFO" />
        <logger name="org.opensaml" level="INFO" />

        <!-- Enable logging of frontend activities -->
        <logger name="se.inera.statistics.web.service.endpoints.LoggingService" level="INFO">
            <appender-ref ref="FRONTEND" />
        </logger>

        <!-- Enable logging of processing status -->
        <logger name="se.inera.statistics.service.processlog.LogConsumerImpl" level="INFO" additivity="false">
            <appender-ref ref="PROCESS" />
        </logger>
        <logger name="se.inera.statistics.service.processlog.message.MessageLogConsumerImpl" level="INFO" additivity="false">
            <appender-ref ref="PROCESS" />
        </logger>
        <logger name="se.inera.statistics.service.hsa.HSAServiceImpl" level="INFO" additivity="false">
            <appender-ref ref="PROCESS"/>
        </logger>
        <logger name="se.inera.statistics.service.helper.certificate.JsonDocumentHelper" level="INFO" additivity="false">
            <appender-ref ref="PROCESS"/>
        </logger>
        <logger name="se.inera.statistics.scheduler.active.LogJob" level="INFO"  additivity="false">
            <appender-ref ref="PROCESS"/>
        </logger>
        <logger name="se.inera.ifv.statistics.spi.authorization.impl.HSAWebServiceCalls" level="INFO"  additivity="false">
            <appender-ref ref="PROCESS"/>
        </logger>
        <logger name="se.inera.statistics.web.service.endpoints.ChartDataService" level="INFO"  additivity="false">
            <appender-ref ref="PROCESS"/>
        </logger>

        <!-- Enable logging of access status -->
        <logger name="se.inera.statistics.web.service.endpoints.ProtectedChartDataService" level="INFO" additivity="false">
            <appender-ref ref="ACCESS" />
        </logger>
        <logger name="se.inera.statistics.web.service.endpoints.ProtectedLandstingService" level="INFO" additivity="false">
            <appender-ref ref="ACCESS" />
        </logger>

        <!-- Enable monitoring logging -->
        <logger name="se.inera.statistics.web.service.monitoring" level="INFO" additivity="false">
            <appender-ref ref="ST_MONITORING" />
        </logger>

        <logger name="se.inera.statistics" level="INFO" additivity="false">
            <appender-ref ref="CONSOLE" />
        </logger>

        <root level="INFO">
            <appender-ref ref="CONSOLE"/>
        </root>

    </configuration>
  sp-sakerhetstjanst.xml: |
    <?xml version="1.0" encoding="UTF-8"?>
    <md:EntityDescriptor xmlns:md="urn:oasis:names:tc:SAML:2.0:metadata" ID="https___statistik.intygstjanster.se" entityID="https://statistik.intygstjanster.se">
      <md:SPSSODescriptor AuthnRequestsSigned="false" WantAssertionsSigned="true" protocolSupportEnumeration="urn:oasis:names:tc:SAML:2.0:protocol">
        <md:SingleLogoutService Binding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" Location="https://statistik.intygstjanster.se/saml/SingleLogout/alias/defaultAlias"/>
        <md:SingleLogoutService Binding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect" Location="https://statistik.intygstjanster.se/saml/SingleLogout/alias/defaultAlias"/>
        <md:NameIDFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress</md:NameIDFormat>
        <md:NameIDFormat>urn:oasis:names:tc:SAML:2.0:nameid-format:transient</md:NameIDFormat>
        <md:NameIDFormat>urn:oasis:names:tc:SAML:2.0:nameid-format:persistent</md:NameIDFormat>
        <md:NameIDFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified</md:NameIDFormat>
        <md:NameIDFormat>urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName</md:NameIDFormat>
        <md:AssertionConsumerService Binding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST" Location="https://statistik.intygstjanster.se/saml/SSO/alias/defaultAlias" index="0" isDefault="true"/>
        <md:AttributeConsumingService index="1">
          <md:ServiceName xml:lang="sv">SP med HSA-uppslag</md:ServiceName>
          <md:RequestedAttribute Name="http://sambi.se/attributes/1/employeeHsaId" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" FriendlyName="employeeHsaId" isRequired="true"/>
          <md:RequestedAttribute Name="urn:sambi:names:attribute:authnMethod" NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" FriendlyName="authnMethod" isRequired="true"/>
        </md:AttributeConsumingService>
      </md:SPSSODescriptor>

    </md:EntityDescriptor>
  statistik.properties: |
    # JMS
    activemq.broker.url=failover:(tcp://ind-pint-activemq1.ind1.sth.basefarm.net:61616,tcp://ind-pint-activemq2.ind1.sth.basefarm.net:61616)\
    ?jms.nonBlockingRedelivery=true\
    &jms.redeliveryPolicy.maximumRedeliveries=3\
    &jms.redeliveryPolicy.maximumRedeliveryDelay=6000\
    &jms.redeliveryPolicy.initialRedeliveryDelay=4000\
    &jms.redeliveryPolicy.useExponentialBackOff=true\
    &jms.redeliveryPolicy.backOffMultiplier=2

    activemq.receiver.queue.name=statistik.utlatande.queue

    redis.host=ind-pint-redis1.ind1.sth.basefarm.net;ind-pint-redis2.ind1.sth.basefarm.net;ind-pint-redis3.ind1.sth.basefarm.net
    redis.port=26379;26379;26379
    redis.sentinel.master.name=ind-pint-redis


    saml.idp.metadata.file=file:///opt/${app.name}/config/idp-sakerhetstjanst.xml
    saml.sp.metadata.file=file:///opt/${app.name}/config/sp-sakerhetstjanst.xml
    sakerhetstjanst.saml.default.alias=defaultAlias
    sakerhetstjanst.saml.idp.metadata.url=https://idp2.sakerhetstjanst.inera.se:443/idp/saml
    sambi.discovery.url=https://fed.sambi.se/prod/ds
    sambi.discovery.response.url=/saml/login/alias/defaultAlias?disco=true

    ntjp.base.url=https://esb.ntjp.se:443/vp

    infrastructure.directory.logicalAddress=SE165565594230-1000

    scheduler.logJob.cron=0 0/1 * * * ?
    scheduler.factReloadJob.cron=0 0 3 * * ?

    certificate.folder=/opt/${app.name}/certifikat

    login.url=login

    ntjp.ws.certificate.type=PKCS12
    ntjp.ws.certificate.file=${certificate.folder}/statistik.intygstjanster.sjunet.org.p12
    ntjp.ws.truststore.file=${certificate.folder}/truststore.jks
    ntjp.ws.truststore.type=JKS

    saml.keystore.file=file://${certificate.folder}/statistik.intygstjanster.sjunet.org.p12
    saml.keystore.alias=1
    saml.truststore.file=file://${certificate.folder}/truststore.jks

    hsa.ws.services.url=https://ws.hsa.sjunet.org/svr-hsaws2/hsaws
    hsa.ws.certificate.type=PKCS12
    hsa.ws.certificate.file=${certificate.folder}/statistik.intygstjanster.sjunet.org.p12
    hsa.ws.truststore.type=JKS
    hsa.ws.truststore.file=${certificate.folder}/truststore.jks
kind: ConfigMap
metadata:
  creationTimestamp: 2019-04-16T17:36:19Z
  name: statistik-config
  namespace: pintyg
  resourceVersion: "76014296"
  selfLink: /api/v1/namespaces/pintyg/configmaps/statistik-config
  uid: 24e651d8-606e-11e9-935a-005056a1387d
