<div uib-collapse="isFilterCollapsed">
<div id="statistics-filter-container" class="hidden-print business-filter" >
  <div class="row" style="text-align: center" data-ng-hide="businessFilter.dataInitialized">
    <span style="margin: auto">Laddar filterdata</span>
  </div>
  <div class="row" data-ng-show="businessFilter.dataInitialized">
    <div class="filter-level">
      <div class="col-xs-12">
      <strong class="title">Tidsintervall</strong>

      <label for="filterFromDate">
        <span message key="lbl.filter.val-av-tidsintervall-fran"></span>
      </label>
      <div class="input-wrapper margin-right">
        <span class="input-group input-group-sm datepicker" ng-class="{'has-error': fromDateValidationError}">
          <input
              id="filterFromDate"
              type="text"
              class="form-control"
              placeholder="{{dateFormatPlaceholder}}"
              ng-model="businessFilter.fromDate"
              uib-datepicker-popup="{{format}}"
              datepicker-options="dateOptions"
              show-button-bar="false"
              is-open="isFromDateOpen"/>
          <span class="input-group-btn">
              <button id="fromDatePickerBtn"
                      type="button"
                      class="btn btn-default"
                      data-ng-click="isFromDateOpen = !isFromDateOpen">
                  <i class="fa fa-calendar"></i>
              </button>
          </span>
        </span>
      </div>

      <label for="filterToDate">
        <span message key="lbl.filter.val-av-tidsintervall-fran"></span>
      </label>
      <div class="input-wrapper margin-right">
        <span class="input-group input-group-sm datepicker" ng-class="{'has-error': toDateValidationError}">
          <input
              id="filterToDate"
              type="text"
              class="form-control"
              placeholder="{{dateFormatPlaceholder}}"
              ng-model="businessFilter.toDate"
              uib-datepicker-popup="{{format}}"
              datepicker-options="dateOptionsTo"
                show-button-bar="false"
                is-open="isToDateOpen"/>
            <span class="input-group-btn">
                <button id="toDatePickerBtn"
                        type="button"
                        class="btn btn-default"
                        data-ng-click="isToDateOpen = !isToDateOpen">
                    <i class="fa fa-calendar"></i>
                </button>
            </span>
          </span>
        </div>

        <button
                type="button"
                class="btn btn-default"
                data-ng-click="clearDates()">
          <span message key="lbl.clear"></span>
        </button>
      </div>
    </div>

    <div class="divider"></div>

    <div class="filter-level">
      <div class="col-xs-12">
        <strong class="title">Filter</strong>

        <tree-multi-selector
            class="margin-right"
            hide-label="true"
            button-icon="fa-stethoscope"
            menu-options="icd10"
            done-clicked="businessFilter.updateDiagnoses"
            text-data="diagnosisFilterSelectorData">
        </tree-multi-selector>

        <div class="margin-right" data-ng-if="businessFilter.numberOfBusinesses() === 'medium' || businessFilter.numberOfBusinesses() === 'large'">
          <select
              ng-model="businessFilter.selectedVerksamhetTypIds"
              multiple="multiple"
              ng-options="verksamhet.id as verksamhet.name for verksamhet in businessFilter.verksamhetsTyper"
              multiselect-dropdown="Verksamhetstyper"
              multiselect-dropdown-icon="fa-building-o"
              id="select-verksamhet">
          </select>
        </div>

        <div class="margin-right" data-ng-if="businessFilter.numberOfBusinesses() === 'medium'">
          <select
              ng-model="businessFilter.geographyBusinessIds"
              multiple="multiple"
              ng-options="business.id as business.name for business in businessFilter.businesses"
              multiselect-dropdown="Enheter"
              multiselect-dropdown-icon="fa-building-o"
              id="select-unit">
          </select>
        </div>

        <tree-multi-selector
            class="margin-right"
            hide-label="true"
            button-icon="fa-building-o"
            menu-options="businessFilter.geography"
            done-clicked="businessFilter.updateGeography"
            data-ng-if="businessFilter.numberOfBusinesses() === 'large'"
            text-data="geographyFilterSelectorData">
        </tree-multi-selector>

        <div class="margin-right">
          <select
              ng-model="businessFilter.selectedSjukskrivningslangdIds"
              multiple="multiple"
              ng-options="sjukskrivningslangd.id as sjukskrivningslangd.name for sjukskrivningslangd in businessFilter.sjukskrivningslangd"
              multiselect-dropdown="SjukskrivningslÃ¤ngder"
              multiselect-dropdown-icon="fa-calendar"
              id="select-sjukskrivningslangd">
          </select>
        </div>

        <div class="margin-right">
          <select
            ng-model="businessFilter.selectedAldersgruppIds"
            multiple="multiple"
            ng-options="aldersgrupp.id as aldersgrupp.name for aldersgrupp in businessFilter.aldersgrupp"
            multiselect-dropdown="Ã…ldersgrupper"
            multiselect-dropdown-icon="fa-calendar"
            id="select-aldersgrupp">
          </select>
        </div>
      </div>
    </div>

    <div class="divider"></div>

    <div class="filter-level bottom-buttons">
        <div class="col-xs-12">
            <button type="button" class="btn btn-default pull-left" data-ng-click="resetBusinessFilter()">
                <span message key="lbl.aterstall"></span>
            </button>

            <button class="btn btn-success pull-right"
                    ng-click="makeSelection()">
                <span class="button-loader" ng-show="loadingFilter"></span> <span message key="lbl.filtrera"></span>
            </button>
        </div>
        <div class="col-xs-12" data-ng-if="showDateValidationError">
          <div class="alert alert-danger" role="alert">
            <strong message key="login.alert-danger"></strong>
            <span message key="alert.filter.date-invalid"></span>
          </div>
        </div>
    </div>
  </div>
</div>
</div>
<filter-button class="hidden-print"></filter-button>
